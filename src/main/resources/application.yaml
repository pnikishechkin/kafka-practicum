server:
    port: 8080

spring:
    application:
        name: kafka-practicum
    kafka:
        # Адреса всех брокеров кластера
        bootstrap-servers: kafka-0:9092
        # Параметры продюсера (отправителя)
        producer:
            client-id: my-producer # идентификатор продюсера - нужен для идентификации и удобства мониторинга
            key-serializer: org.apache.kafka.common.serialization.StringSerializer
            value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
            properties:
                # Не добавлять в сообщение заголовки с описанием типа объекта (чистый json).
                # Consumer узнает тип или из default.type, или при указании в @KafkaListener
                spring.json.add.type.headers: false
                spring.json.trusted.packages: "*"
            # Количество автоматических повторных попыток отправки сообщений при временных сбоях
            retries: 3
        # Параметры консьюмера (получателя)
        consumer:
            group-id: single-consumer-group # уникальный идентификатор группы (консьюмеры могут приналежать одной группе)
            key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
            value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
            properties:
                spring.json.value.default.type: ru.nikishechkin.kafka_practicum.dto.Message
                spring.json.trusted.packages: "*"
            # Определяет, что делать, если нет сохраненного смещения для группы:
            # - earliest - начинать чтение с самого старого доступного сообщения,
            # - latest - начинать чтение с самого нового сообщения
            auto-offset-reset: earliest
            enable-auto-commit: true # автоматически сохранять смещения (offset), после получения сообщений
            max-poll-records: 1 # Только одно сообщение за раз
            fetch-min-size: 1 # Минимум 1 сообщение


#kafka:
#    topics:
#        test-topic: topic1